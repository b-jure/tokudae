# DO NOT MODIFY THIS PART >>>>>>>>>>>>>>>>
local debug = import("debug");
fn test(name, level)
    assert(debug.getinfo(2, "l").currline == 6);

test(5, 5);

fn err0(name, level) {
    if (!name)
        error("name is nil", level);
    else
        return 69;
}

local res, err = pcall(err0, nil, 0);
assert(!res and err == "name is nil");

fn err1(name, level)
    err0(name, level);
# <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

res, err = pcall(err1, nil, 0);
assert(!res and err == "name is nil");

res, err = pcall(err1, nil, 1);
assert(!res and reg.find(err, ":10:%s*name is nil"));

res, err = pcall(err1, nil, 2);
assert(!res and reg.find(err, ":19:%s*name is nil"));
